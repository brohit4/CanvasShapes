var x,y,totalShapes,canvasWidth,canvasHeight,shapeData=[],frameData=[],frameCount,reqstAnimationFrames,createRandomData,animateShapes,data,canvasWidth,canvasHeight;createRandomData=function(a,b,c,d){var e,f,g,h,i,j,k,l,m=[],n=[];for(e=a+b,g=d.height,f=d.width,k=0;e>k;k++)m.push({x:Math.floor(1e3*Math.random()%f),y:Math.floor(1e3*Math.random()%g),color:"hsl("+Math.floor(1e3*Math.random()%360)+", 70%,70%)"});for(h=function(a,b){var c,d,e=[],f=[];for(a=a||0,b=b||0,c=0;b>c;c++)f.push({realIndex:c});for(;e.length!==a;)d=1e3*Math.random()*b%f.length,e.push(f.splice(d,1)[0]);return e},k=0;c>k;k++){for(i=h(a,e),l=0;a>l;l++)j=i[l],j.x=1e3*Math.random()%f,j.y=1e3*Math.random()%g;n.push(i)}return{shapeData:m,frameData:n}},reqstAnimationFrames=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,animateShapes=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;for(d=CanvasShapes.init({clearColor:"#000",canvasConfig:c.canvasConfig}),o=0;o<a.length;o++)f=a[o],f=new d({type:"RECTANGLE",x:f.x,y:f.y,fillStyle:f.color,width:50,height:50}),f.paint();for(e=CanvasShapes.init({clearColor:"#000",canvasConfig:c.canvasConfig}),o=0;o<a.length;o++)f=a[o],f=new e({type:"RECTANGLE",x:f.x,y:f.y,fillStyle:f.color,width:50,height:50}),f.paint();g=0;var q=document.getElementById("libfps"),r=document.getElementById("vanfps");m=function(){g||(i=(new Date).getTime()),k=b[g],console.time("Time for library usage"),d.moveShapes(k),console.timeEnd("Time for library usage"),g++,j=(new Date).getTime(),q.innerHTML=1e3*g/(j-i),frameCount>g?reqstAnimationFrames(m):(h=0,i=(new Date).getTime(),reqstAnimationFrames(n))},n=function(){for(k=b[h],shapes=e.shapes,console.time("Time for Vanilla Redraw"),o=0;x>o;o++){for(l=k[o],p=0;p<shapes.length;p++)shapes[p].clearShape();for(f=shapes[l.realIndex],f.x=l.x,f.y=l.y,e.decrementDepth(l.realIndex+1),f=shapes.splice(l.realIndex,1),f.index=shapes.length,shapes.push(f[0]),p=0;p<shapes.length;p++)shapes[p].draw()}console.timeEnd("Time for Vanilla Redraw"),h++,j=(new Date).getTime(),r.innerHTML=1e3*h/(j-i),frameCount>h&&reqstAnimationFrames(n)},reqstAnimationFrames(m)},x=2,y=10,frameCount=100,canvasWidth=300,canvasHeight=300,data=createRandomData(x,y,frameCount,{width:canvasWidth,height:canvasHeight}),shapeData=data.shapeData,frameData=data.frameData,animateShapes(shapeData,frameData,{canvasConfig:{width:canvasWidth,height:canvasHeight}});